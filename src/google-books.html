<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="google-books-entry.html">
<script src="../bower_components/polymer-ts/polymer-ts.js"></script>

<dom-module id="google-books">
  <template>
    <style>
    </style>
    <template is="dom-if" if="[[searchMode]]">
      <iron-ajax
        id="ajaxSearch"
        auto
        url="https://www.googleapis.com/books/v1/volumes"
        params="[[computeParams]]"
        handle-as="json"
        on-response="handleResponse"
        debounce-duration="300"></iron-ajax>
      <div>[[results.length]] results</div>
      <template is="dom-repeat" items="[[results]]">
        <google-books-entry entry="{{item}}"></google-books-entry>
      </template>
    </template>
    <template is="dom-if" if="[[!searchMode]]">
      <iron-ajax
        id="ajaxLookup"
        auto
        url="https://www.googleapis.com/books/v1/volumes/[[gbooksId]]"
        handle-as="json"
        on-response="handleResponse"
        debounce-duration="300"></iron-ajax>
      <google-books-entry id="lookupEntry" entry="{{lookupResult}}" selected></google-books-entry>
    </template>
  </template>
</dom-module>

<script type="text/javascript" src="google-books.js"></script>
