<!--Template for a generic field.-->
<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/paper-tooltip/paper-tooltip.html">
<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../bower_components/iron-validatable-behavior/iron-validatable-behavior.html">

<script src="../bower_components/polymer-ts/polymer-ts.js"></script>
<script src="../node_modules/reflect-metadata/Reflect.js"></script>
<script src="autofieldable.js"></script>

<dom-module id="auto-field">
  <template>
    <style>
      :host([invalid]) div {
        color: red;
      }
    </style>
    <template is="dom-if" if="[[isString]]">
      <paper-input hidden$="[[!editing]]" value="{{item.value}}" label$="[[item.label]]"
                   invalid="{{invalid}}"></paper-input>
      <div hidden$="[[editing]]">[[item.displayValue]]<paper-tooltip>[[item.label]]</paper-tooltip></div>
    </template>
    <template is="dom-if" if="[[isNumber]]">
      <paper-input-container hidden$="[[!editing]]" invalid="{{invalid}}">
        <label>[[item.label]]</label>
        <input is="iron-input" bind-value="{{item.value}}" title="[[item.label]]">
      </paper-input-container>
      <div hidden$="[[editing]]">[[item.displayValue]]<paper-tooltip>[[item.label]]</paper-tooltip></div>
    </template>
    <template is="dom-if" if="[[isBoolean]]">
      <div><paper-checkbox checked="{{item.value}}" disabled$="[[!editing]]">[[item.label]]</paper-checkbox></div>
    </template>
    <template is="dom-if" if="[[isDate]]">
      <div hidden$="[[editing]]">[[item.displayValue]]<paper-tooltip>[[item.label]]</paper-tooltip></div>
    </template>
    <template is="dom-if" if="[[isArray]]">
      <div hidden$="[[editing]]">[[item.displayValue]]<paper-tooltip>[[item.label]]</paper-tooltip></div>
      <template is="dom-repeat" items="{{item.value}}" as="subitem">
        <paper-input value="{{subitem}}" label$="[[item.label]]" hidden$="[[!editing]]"></paper-input>
      </template>
      <paper-input id="newSubitem" hidden$="[[!editing]]" label$="[[item.label]]"></paper-input>
    </template>
    <template is="dom-if" if="[[unknownType]]">
      <div style="color:darkorange">UNKNOWN TYPE: [[item.displayValue]]</div>
    </template>
  </template>
</dom-module>

<script type="text/javascript" src="auto-field.js"></script>
